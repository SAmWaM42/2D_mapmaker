#include "raylib.h"
#include "advanced_collision.hpp"

#define screenheight 720
#define screenwidth 960

int main()
{

   int window_state = 0;
   int inner_windowstate = 0;
   rectangle player;
   player.x=screenwidth/2;
   player.y=screenheight/2;
   player.width=50;
   player.height=50;
   player.rotate_box(45);
   rectangle  testbox;
   testbox.x=screenwidth/5;
   testbox.y=screenheight/2;
   testbox.width=50;
   testbox.height=50;
   testbox.rotate_box(45);


   Vector2 offset = {screenwidth / 2, screenheight / 2};
   Vector2 target = {screenwidth / 2, screenheight / 2 - 200};
    Camera2D cam={offset,target,0,1};
    
    
   InitWindow(screenwidth, screenheight, "indigoV2");
   SetTargetFPS(60);
   while (!WindowShouldClose())
   {

 cam.target={testbox.x,testbox.y};

   if(IsKeyDown(KEY_DOWN))
{
    player.y+=1;
}
    if(IsKeyDown(KEY_UP))
{
    player.y-=1;
}
   if(IsKeyDown(KEY_LEFT))
{
    player.x-=1;
}
   
   if(IsKeyDown(KEY_RIGHT))
{
    player.x+=1;
}
 
  player.update_position(); 
  testbox.update_position();
      BeginDrawing();
      BeginMode2D(cam);
   
      ClearBackground(RAYWHITE);
       
       if(player.colliding(testbox))
       {
        player.drawself(GREEN);
       }
       else
       {  
        player.drawself(BLACK);
       }
        
        testbox.drawself(BLACK);
         

      EndMode2D();
      EndDrawing();
   }
   CloseWindow();
   return 0;
}


